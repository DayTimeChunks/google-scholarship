{"ast":null,"code":"// Useful documents:\n// https://github.com/foursquare/react-foursquare\nvar apiUpToDate = \"20181204\"; // Date I built this app, tells FourSquare to use an api version compatible with this date\n\nvar limitResponses = \"3\"; // Number of responses (I think maximum is 50)\n\nvar id = \"JX2GROLYRGSEKWBDR5X5MITPUUZAH3NEL5BLKYGTF5RBT5IA\";\nvar secret = \"XN3KVA302HH1TJ2P1OPH3WUWKGRXVKMX2NWNPQBTXOZSKPPC\";\nvar coffee = \"&v=20180323&limit=1\";\nvar latlon = \"&ll=40.7243,-74.0018\";\nvar q = \"&query=coffee\";\nvar explore = \"https://api.foursquare.com/v2/venues/explore\";\nvar venuApi = 'https://api.foursquare.com/v2/venues';\nvar apiUrl = \"https://api.foursquare.com/v2\";\nvar apiFeature = \"/venues\"; // 'https://api.foursquare.com/v2/venues/explore?client_id=CLIENT_ID&client_secret=CLIENT_SECRET&v=20180323&limit=1&ll=40.7243,-74.0018&query=coffee'\n// Generate a unique token for storing your bookshelf data on the backend server.\n\nvar token = localStorage.token;\nif (!token) token = localStorage.token = Math.random().toString(36).substr(-8);\nvar headers = {\n  'Accept': 'application/json',\n  'Authorization': token\n};\nexport var exploreArea = function exploreArea(location) {\n  var exploreLoc = explore + \"?ll=\" + location.lat.toString() + \",\" + location.lng.toString();\n  console.log(\"explore argument: \", exploreLoc);\n  fetch(exploreLoc).then(function (response) {\n    console.log(response);\n  }).catch(function (err) {\n    console.log(err);\n  });\n}; // export const exploreApi = (loc) => {\n//   return fetch(`${api}client_id=${id}&client_secret=${secret}&v=${apiUpToDate}&limit=${limitResponses}&ll=${loc.lat},${loc.lng}`, {})\n//     .then((res) => res.json())\n//     .catch( (err) => {\n//       console.log(\"Fetch error\", err)\n//     });\n// };\n\nexport var getTapas = function getTapas(loc) {\n  var api = \"https://api.foursquare.com/v2/venues/explore?\";\n  var myHeaders = new Headers();\n  var myInit = {\n    method: 'GET',\n    headers: myHeaders,\n    mode: 'cors',\n    cache: 'default'\n  };\n  myHeaders.append(\"Accept-Language\", \"de\");\n  return fetch(\"\".concat(api, \"client_id=\").concat(id, \"&client_secret=\").concat(secret, \"&v=\").concat(apiUpToDate, \"&limit=\").concat(limitResponses, \"&intent=browse&ll=\").concat(loc.lat, \",\").concat(loc.lng), myInit).then(function (res) {\n    return res.json();\n  }).catch(function (err) {\n    console.log(\"getTapas error, \", err);\n  });\n};\nexport var getPhotos = function getPhotos(idArr) {\n  // console.log(\"idArr \", idArr);\n  // Construct an array of \"fetch\" requests\n  var fetchArray = idArr.map(function (idPhoto) {\n    return fetch(\"\".concat(apiUrl).concat(apiFeature, \"/\").concat(idPhoto, \"/photos?client_id=\").concat(id, \"&client_secret=\").concat(secret, \"&v=\").concat(apiUpToDate));\n  }); // console.log(\"fetchArray: \", fetchArray);\n  // Fetch all, and wait for all to resolve,\n  // then return an array of responses converted to json()\n\n  return Promise.all(fetchArray).then(function (respArr) {\n    return respArr.map(function (response) {\n      return response.json();\n    }); // jsonResolvedArr: Array of resolved promises\n  });\n};","map":{"version":3,"sources":["/Users/DayTightChunks/Documents/eCourses/WebDev/FE-Nanodegree/React-apps/mytapas-v1/src/utils/FoursquareAPI.js"],"names":["apiUpToDate","limitResponses","id","secret","coffee","latlon","q","explore","venuApi","apiUrl","apiFeature","token","localStorage","Math","random","toString","substr","headers","exploreArea","location","exploreLoc","lat","lng","console","log","fetch","then","response","catch","err","getTapas","loc","api","myHeaders","Headers","myInit","method","mode","cache","append","res","json","getPhotos","idArr","fetchArray","map","idPhoto","Promise","all","respArr"],"mappings":"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","sourcesContent":["// Useful documents:\n// https://github.com/foursquare/react-foursquare\n\n\nconst apiUpToDate = \"20181204\"; // Date I built this app, tells FourSquare to use an api version compatible with this date\nconst limitResponses = \"3\"; // Number of responses (I think maximum is 50)\nconst id = \"JX2GROLYRGSEKWBDR5X5MITPUUZAH3NEL5BLKYGTF5RBT5IA\";\nconst secret = \"XN3KVA302HH1TJ2P1OPH3WUWKGRXVKMX2NWNPQBTXOZSKPPC\";\n\nconst coffee = \"&v=20180323&limit=1\";\nconst latlon = \"&ll=40.7243,-74.0018\";\nconst q = \"&query=coffee\";\n\nlet explore = \"https://api.foursquare.com/v2/venues/explore\";\nlet venuApi = 'https://api.foursquare.com/v2/venues';\nlet apiUrl = \"https://api.foursquare.com/v2\";\nlet apiFeature = \"/venues\";\n\n\n\n// 'https://api.foursquare.com/v2/venues/explore?client_id=CLIENT_ID&client_secret=CLIENT_SECRET&v=20180323&limit=1&ll=40.7243,-74.0018&query=coffee'\n\n// Generate a unique token for storing your bookshelf data on the backend server.\nlet token = localStorage.token;\nif (!token)\n  token = localStorage.token = Math.random().toString(36).substr(-8);\n\nconst headers = {\n  'Accept': 'application/json',\n  'Authorization': token\n};\n\nexport const exploreArea = (location) => {\n\n  let exploreLoc = explore + \"?ll=\" + location.lat.toString() + \",\" + location.lng.toString();\n  console.log(\"explore argument: \", exploreLoc);\n\n  fetch(exploreLoc)\n    .then( (response) => {\n      console.log(response)\n    })\n    .catch( (err) => {\n     console.log(err)\n  })\n};\n\n// export const exploreApi = (loc) => {\n//   return fetch(`${api}client_id=${id}&client_secret=${secret}&v=${apiUpToDate}&limit=${limitResponses}&ll=${loc.lat},${loc.lng}`, {})\n//     .then((res) => res.json())\n//     .catch( (err) => {\n//       console.log(\"Fetch error\", err)\n//     });\n// };\n\nexport const getTapas = (loc) => {\n\n  const api = \"https://api.foursquare.com/v2/venues/explore?\";\n\n  let myHeaders = new Headers();\n\n  const myInit = {\n    method: 'GET',\n    headers: myHeaders,\n    mode: 'cors',\n    cache: 'default' };\n\n  myHeaders.append(\"Accept-Language\", \"de\");\n\n  return fetch(`${api}client_id=${id}&client_secret=${secret}&v=${apiUpToDate}&limit=${limitResponses}&intent=browse&ll=${loc.lat},${loc.lng}`, myInit)\n    .then((res) => res.json())\n    .catch( (err) => {\n      console.log(\"getTapas error, \", err)\n    });\n};\n\nexport const getPhotos = (idArr) => {\n  // console.log(\"idArr \", idArr);\n  // Construct an array of \"fetch\" requests\n  let fetchArray = idArr.map( idPhoto =>\n    (fetch(`${apiUrl}${apiFeature}/${idPhoto}/photos?client_id=${id}&client_secret=${secret}&v=${apiUpToDate}`)));\n  // console.log(\"fetchArray: \", fetchArray);\n\n  // Fetch all, and wait for all to resolve,\n  // then return an array of responses converted to json()\n  return Promise.all(fetchArray)\n    .then( respArr => {\n      return respArr.map( response => response.json());\n      // jsonResolvedArr: Array of resolved promises\n  });\n};\n"]},"metadata":{},"sourceType":"module"}